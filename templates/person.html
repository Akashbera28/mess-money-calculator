{% extends "base.html" %}
{% block content %}
<h3>Add Expense</h3>
<form id="expenseForm">
    <div class="mb-3">
        <label>Person:</label>
        <select name="person" class="form-select" required>
            {% for p in persons %}
            <option value="{{p}}">{{p}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3"><input class="form-control" name="item" placeholder="Item" required></div>
    <div class="mb-3"><input class="form-control" name="amount" type="number" min="1" step="0.01" placeholder="Amount" required></div>
    <div class="mb-3"><input class="form-control" name="date" type="date" required></div>
    <div class="mb-3"><textarea class="form-control" name="notes" placeholder="Notes (optional)"></textarea></div>
    <button class="btn btn-primary">Add Expense</button>
</form>
<div id="msg" class="mt-3 text-success fw-bold"></div>

<script>
document.getElementById("expenseForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    const res = await fetch("/person", { method: "POST", body: formData });
    const data = await res.json();
    document.getElementById("msg").innerText = data.message;
    e.target.reset();
});
</script>
{% endblock %}
